{"ast":null,"code":"import _classCallCheck from\"C:/Users/ASUS/dev/mesto-auth/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/ASUS/dev/mesto-auth/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Auth=/*#__PURE__*/function(){function Auth(options){_classCallCheck(this,Auth);this._baseUrl=options.baseUrl;}_createClass(Auth,[{key:\"_checkResponse\",value:function _checkResponse(res){if(res.ok){return res.json();}return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}},{key:\"registration\",value:function registration(email,password){return fetch(\"\".concat(this._baseUrl,\"/signup\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,password:password})}).then(this._checkResponse).then(function(res){return res;});}},{key:\"login\",value:function login(email,password){return fetch(\"\".concat(this._baseUrl,\"/signin\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,password:password})}).then(this._checkResponse).then(function(res){localStorage.setItem(\"token\",res.token);});}},{key:\"checkToken\",value:function checkToken(token){return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{method:'GET',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}}).then(this._checkResponse);}}]);return Auth;}();export var auth=new Auth({baseUrl:\"https://auth.nomoreparties.co\"});","map":{"version":3,"names":["Auth","options","_baseUrl","baseUrl","res","ok","json","Promise","reject","status","email","password","fetch","method","headers","body","JSON","stringify","then","_checkResponse","localStorage","setItem","token","auth"],"sources":["C:/Users/ASUS/dev/mesto-auth/src/utils/Auth.js"],"sourcesContent":["class Auth {\r\n  constructor(options) {\r\n    this._baseUrl = options.baseUrl;\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }\r\n\r\n  registration(email, password) {\r\n    return fetch(`${this._baseUrl}/signup`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ email, password })\r\n    })\r\n      .then(this._checkResponse)\r\n\r\n      .then((res) => {\r\n        return res;\r\n      })\r\n  }\r\n\r\n  login(email, password) {\r\n    return fetch(`${this._baseUrl}/signin`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ email, password })\r\n    })\r\n    .then(this._checkResponse)\r\n\r\n    .then(((res) => {\r\n      localStorage.setItem(\"token\", res.token);\r\n    }))\r\n  }\r\n\r\n  checkToken(token) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    })\r\n\r\n    .then(this._checkResponse)\r\n  }\r\n}\r\n\r\nexport const auth = new Auth({\r\n  baseUrl: `https://auth.nomoreparties.co`\r\n})\r\n"],"mappings":"qOAAMA,K,yBACJ,cAAYC,OAAZ,CAAqB,4BACnB,KAAKC,QAAL,CAAgBD,OAAO,CAACE,OAAxB,CACD,C,+CAED,wBAAeC,GAAf,CAAoB,CAClB,GAAIA,GAAG,CAACC,EAAR,CAAY,CACV,MAAOD,IAAG,CAACE,IAAJ,EAAP,CACD,CAED,MAAOC,QAAO,CAACC,MAAR,iDAA0BJ,GAAG,CAACK,MAA9B,EAAP,CACD,C,4BAED,sBAAaC,KAAb,CAAoBC,QAApB,CAA8B,CAC5B,MAAOC,MAAK,WAAI,KAAKV,QAAT,YAA4B,CACtCW,MAAM,CAAE,MAD8B,CAEtCC,OAAO,CAAE,CACP,eAAgB,kBADT,CAF6B,CAKtCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEP,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAf,CALgC,CAA5B,CAAL,CAOJO,IAPI,CAOC,KAAKC,cAPN,EASJD,IATI,CASC,SAACd,GAAD,CAAS,CACb,MAAOA,IAAP,CACD,CAXI,CAAP,CAYD,C,qBAED,eAAMM,KAAN,CAAaC,QAAb,CAAuB,CACrB,MAAOC,MAAK,WAAI,KAAKV,QAAT,YAA4B,CACtCW,MAAM,CAAE,MAD8B,CAEtCC,OAAO,CAAE,CACP,eAAgB,kBADT,CAF6B,CAKtCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEP,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAf,CALgC,CAA5B,CAAL,CAONO,IAPM,CAOD,KAAKC,cAPJ,EASND,IATM,CASA,SAACd,GAAD,CAAS,CACdgB,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BjB,GAAG,CAACkB,KAAlC,EACD,CAXM,CAAP,CAYD,C,0BAED,oBAAWA,KAAX,CAAkB,CAChB,MAAOV,MAAK,WAAI,KAAKV,QAAT,cAA8B,CACxCW,MAAM,CAAE,KADgC,CAExCC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,iCAA2BQ,KAA3B,CAFO,CAF+B,CAA9B,CAAL,CAQNJ,IARM,CAQD,KAAKC,cARJ,CAAP,CASD,C,oBAGH,MAAO,IAAMI,KAAI,CAAG,GAAIvB,KAAJ,CAAS,CAC3BG,OAAO,gCADoB,CAAT,CAAb"},"metadata":{},"sourceType":"module"}