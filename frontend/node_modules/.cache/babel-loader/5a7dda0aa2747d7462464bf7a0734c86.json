{"ast":null,"code":"import _classCallCheck from\"C:/Users/ASUS/dev/mesto-full/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/ASUS/dev/mesto-full/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Auth=/*#__PURE__*/function(){function Auth(options){_classCallCheck(this,Auth);this._baseUrl=options.baseUrl;}_createClass(Auth,[{key:\"_checkResponse\",value:function _checkResponse(res){if(res.ok){return res.json();}return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}},{key:\"registration\",value:function registration(email,password){return fetch(\"\".concat(this._baseUrl,\"/signup\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,password:password}),credentials:'include'}).then(this._checkResponse).then(function(res){return res;});}},{key:\"login\",value:function login(email,password){return fetch(\"\".concat(this._baseUrl,\"/signin\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,password:password}),credentials:'include'}).then(this._checkResponse).then(function(res){localStorage.setItem(\"user\",res);});}},{key:\"checkToken\",value:function checkToken(userId){return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{method:'GET',headers:{'Content-Type':'application/json','Authorization':\"\".concat(userId)},credentials:'include'}).then(this._checkResponse);}}]);return Auth;}();export var auth=new Auth({baseUrl:\"https://api.catintoner.nomorepartiesxyz.ru\"});","map":{"version":3,"names":["Auth","options","_baseUrl","baseUrl","res","ok","json","Promise","reject","status","email","password","fetch","method","headers","body","JSON","stringify","credentials","then","_checkResponse","localStorage","setItem","userId","auth"],"sources":["C:/Users/ASUS/dev/mesto-full/frontend/src/utils/Auth.js"],"sourcesContent":["class Auth {\n  constructor(options) {\n    this._baseUrl = options.baseUrl;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n\n    return Promise.reject(`Ошибка: ${res.status}`);\n  }\n\n  registration(email, password) {\n    return fetch(`${this._baseUrl}/signup`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ email, password }),\n      credentials: 'include'\n    })\n      .then(this._checkResponse)\n\n      .then((res) => {\n        return res;\n      })\n  }\n\n  login(email, password) {\n    return fetch(`${this._baseUrl}/signin`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ email, password }),\n      credentials: 'include'\n    })\n    .then(this._checkResponse)\n\n    .then(((res) => {\n      localStorage.setItem(\"user\", res);\n    }))\n  }\n\n  checkToken(userId) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `${userId}`\n      },\n      credentials: 'include'\n    })\n\n    .then(this._checkResponse)\n  }\n}\n\nexport const auth = new Auth({\n  baseUrl: `https://api.catintoner.nomorepartiesxyz.ru`\n})\n"],"mappings":"uPAAMA,K,yBACJ,cAAYC,OAAZ,CAAqB,4BACnB,KAAKC,QAAL,CAAgBD,OAAO,CAACE,OAAxB,CACD,C,+CAED,wBAAeC,GAAf,CAAoB,CAClB,GAAIA,GAAG,CAACC,EAAR,CAAY,CACV,MAAOD,IAAG,CAACE,IAAJ,EAAP,CACD,CAED,MAAOC,QAAO,CAACC,MAAR,iDAA0BJ,GAAG,CAACK,MAA9B,EAAP,CACD,C,4BAED,sBAAaC,KAAb,CAAoBC,QAApB,CAA8B,CAC5B,MAAOC,MAAK,WAAI,KAAKV,QAAT,YAA4B,CACtCW,MAAM,CAAE,MAD8B,CAEtCC,OAAO,CAAE,CACP,eAAgB,kBADT,CAF6B,CAKtCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEP,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAf,CALgC,CAMtCO,WAAW,CAAE,SANyB,CAA5B,CAAL,CAQJC,IARI,CAQC,KAAKC,cARN,EAUJD,IAVI,CAUC,SAACf,GAAD,CAAS,CACb,MAAOA,IAAP,CACD,CAZI,CAAP,CAaD,C,qBAED,eAAMM,KAAN,CAAaC,QAAb,CAAuB,CACrB,MAAOC,MAAK,WAAI,KAAKV,QAAT,YAA4B,CACtCW,MAAM,CAAE,MAD8B,CAEtCC,OAAO,CAAE,CACP,eAAgB,kBADT,CAF6B,CAKtCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEP,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAf,CALgC,CAMtCO,WAAW,CAAE,SANyB,CAA5B,CAAL,CAQNC,IARM,CAQD,KAAKC,cARJ,EAUND,IAVM,CAUA,SAACf,GAAD,CAAS,CACdiB,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA6BlB,GAA7B,EACD,CAZM,CAAP,CAaD,C,0BAED,oBAAWmB,MAAX,CAAmB,CACjB,MAAOX,MAAK,WAAI,KAAKV,QAAT,cAA8B,CACxCW,MAAM,CAAE,KADgC,CAExCC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,0BAAoBS,MAApB,CAFO,CAF+B,CAMxCL,WAAW,CAAE,SAN2B,CAA9B,CAAL,CASNC,IATM,CASD,KAAKC,cATJ,CAAP,CAUD,C,oBAGH,MAAO,IAAMI,KAAI,CAAG,GAAIxB,KAAJ,CAAS,CAC3BG,OAAO,6CADoB,CAAT,CAAb"},"metadata":{},"sourceType":"module"}